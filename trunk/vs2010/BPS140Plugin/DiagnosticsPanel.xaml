<UserControl x:Class="BioNex.BPS140Plugin.DiagnosticsPanel"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:led="clr-namespace:BioNex.Shared.BioNexGuiControls;assembly=BioNexGuiControls"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Loaded="UserControl_Loaded">
    
    <UserControl.Resources>
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=OneWayToSource}" />
        </Style>
        <Style TargetType="{x:Type Button}">
            <Setter Property="ToolTipService.ShowOnDisabled" Value="True" />
        </Style>
    </UserControl.Resources>
    
    <DockPanel>
        <!-- #292 added reset interlock button to toolbar -->
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="3">
            <Button Margin="3" Width="100" Command="{Binding ResetInterlocksCommand}">
                <Button.Content>
                    <StackPanel>
                        <Image Source="Images/eraser.png" Width="48" />
                        <Label HorizontalContentAlignment="Center">Reset Interlocks</Label>
                    </StackPanel>
                </Button.Content>
            </Button>
        </StackPanel>
        <!-- device controls and status -->
        <GroupBox Header="Status and Controls" DockPanel.Dock="Bottom">
            <UniformGrid Rows="1">
                <!-- status indicators, like locked, which side is facing Hive, protocol running -->
                <led:LED LEDSize="15" LEDLabel="Locked" LEDColor="{Binding LockedColor}" />
                <led:LED LEDSize="15" LEDLabel="At Side 1" LEDColor="{Binding Side1Color}" />
                <led:LED LEDSize="15" LEDLabel="At Side 2" LEDColor="{Binding Side2Color}" />
            </UniformGrid>
        </GroupBox>
        <!-- inventory -->
        <GroupBox Header="Inventory" DockPanel.Dock="Right">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <!-- inventory commands -->
                <UniformGrid Grid.Column="0" Columns="1" ToolTipService.ShowOnDisabled="True">
                    <Button Margin="5" Command="{Binding ReinventoryCommand}" ToolTip="{Binding ReinventoryTooltip}">Inventory All Racks</Button>
                    <Button Margin="5" Command="{Binding ReinventorySelectedCommand}" ToolTip="{Binding ReinventorySelectedToolTip}">Inventory Selected Rack(s)</Button>
                    <Button Margin="5" Command="{Binding UpdateInventoryViewCommand}">Update Inventory View</Button>
                </UniformGrid>
                <!-- side 1 -->
                <DockPanel Grid.Column="1">
                    <TextBlock DockPanel.Dock="Bottom" HorizontalAlignment="Center">Side 1</TextBlock>
                    <Viewbox Stretch="Uniform" DockPanel.Dock="Top">
                        <ListBox ItemsSource="{Binding Side1InventoryView}" HorizontalContentAlignment="Stretch" BorderThickness="0" Background="Transparent" SelectionMode="Extended">
                            <ListBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Rows="1" />
                                </ItemsPanelTemplate>
                            </ListBox.ItemsPanel>
                        </ListBox>
                    </Viewbox>
                </DockPanel>
                <!-- side 2 -->
                <DockPanel Grid.Column="2">
                    <TextBlock DockPanel.Dock="Bottom" HorizontalAlignment="Center">Side 2</TextBlock>
                    <Viewbox DockPanel.Dock="Top" Stretch="Uniform">
                        <ListBox ItemsSource="{Binding Side2InventoryView}" HorizontalContentAlignment="Stretch" BorderThickness="0" Background="Transparent" SelectionMode="Extended">
                            <ListBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Rows="1" />
                                </ItemsPanelTemplate>
                            </ListBox.ItemsPanel>
                        </ListBox>
                    </Viewbox>
                </DockPanel>
                <StackPanel Grid.Column="3" Orientation="Vertical" Margin="10">
                    <TextBlock Width="Auto" HorizontalAlignment="Center">Legend</TextBlock>
                    <Border MinHeight="25" CornerRadius="5" Background="DarkGreen">
                        <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="Yellow">Loaded with barcoded plate</TextBlock>
                    </Border>
                    <Border MinHeight="25" CornerRadius="5" Background="Goldenrod">
                        <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="Black">Reserved for barcoded plate</TextBlock>
                    </Border>
                    <Border MinHeight="25" CornerRadius="5" Background="Purple">
                        <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="Yellow">Tipbox or reversed plate</TextBlock>
                    </Border>
                    <Border MinHeight="25" CornerRadius="5" Background="LightGray">
                        <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="Black">No plate present</TextBlock>
                    </Border>
                </StackPanel>
            </Grid>
        </GroupBox>
    </DockPanel>
</UserControl>
