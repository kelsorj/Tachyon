<UserControl x:Class="BioNex.GreenMachine.TTDiagnostics"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:utils="clr-namespace:BioNex.Shared.Utils;assembly=Utils"
             mc:Ignorable="d" d:DesignHeight="396" d:DesignWidth="749" Loaded="UserControl_Loaded" Unloaded="UserControl_Unloaded">
    
    <UserControl.Resources>
        <utils:StringFormatter x:Key="PositionFormatter" />
        <Style TargetType="{x:Type TextBlock}">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="HorizontalAlignment" Value="Right" />
        </Style>
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
        </Style>
        <Style TargetType="{x:Type GroupBox}">
            <Setter Property="Margin" Value="3" />
            <Setter Property="BorderBrush" Value="Orange" />
        </Style>
        <Style TargetType="{x:Type ComboBox}">
            <Setter Property="Margin" Value="3" />
        </Style>
        <Style TargetType="{x:Type Button}">
            <Setter Property="Margin" Value="3" />
        </Style>
    </UserControl.Resources>
    
    <DockPanel>
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Top">
            <Button Margin="8" ToolTip="Home all axes" Command="{Binding HomeAllAxesCommand}" Width="64">
                <Button.Content>
                    <StackPanel>
                        <Image Source="Images/home.png" Width="32" />
                        <TextBlock HorizontalAlignment="Center">Home Axes</TextBlock>
                    </StackPanel>
                </Button.Content>
            </Button>
            <Button Margin="8" ToolTip="Stop motion" Command="{Binding StopCommand}" Width="64">
                <Button.Content>
                    <StackPanel>
                        <Image Source="Images/stop.png" Width="32" />
                        <TextBlock HorizontalAlignment="Center">Stop</TextBlock>
                    </StackPanel>
                </Button.Content>
            </Button>
        </StackPanel>
        <!-- jog / teach area-->
        <Grid DockPanel.Dock="Bottom">
            <Grid.ColumnDefinitions>
                <!-- axes -->
                <ColumnDefinition />
                <!-- teaching and other functions -->
                <ColumnDefinition MaxWidth="300" />
            </Grid.ColumnDefinitions>
            <!-- Jogging here -->
            <!-- Z -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <!-- Y -->
                    <ColumnDefinition />
                    <!-- X -->
                    <ColumnDefinition Width="3*" />
                    <!-- Z -->
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <!-- Y -->
                <GroupBox Header="Y Axis" Grid.Column="0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <Button Grid.Row="0" Margin="3" ToolTip="Home Y axis" Command="{Binding HomeAxisCommand}" CommandParameter="Y" Width="48" Height="48">
                            <Button.Content>
                                <StackPanel>
                                    <Image Source="Images/home.png" Width="16" />
                                    <TextBlock HorizontalAlignment="Center">Home Y</TextBlock>
                                </StackPanel>
                            </Button.Content>
                        </Button>
                        <Button Grid.Row="1" Margin="3" ToolTip="Jog in the negative direction" Command="{Binding JogNegativeCommand}" CommandParameter="Y" Width="48" Height="48">
                            <Button.Content>
                                <StackPanel>
                                    <!-- Image Source="Images/home.png" Width="16" /-->
                                    <TextBlock HorizontalAlignment="Center">Jog -</TextBlock>
                                </StackPanel>
                            </Button.Content>
                        </Button>
                        <ComboBox Grid.Row="2" Height="30" MaxWidth="75" ItemsSource="{Binding YAxisIncrementItems}" IsSynchronizedWithCurrentItem="True" />
                        <Button Grid.Row="3" Margin="3" ToolTip="Jog in the positive direction" Command="{Binding JogPositiveCommand}" CommandParameter="Y" Width="48" Height="48">
                            <Button.Content>
                                <StackPanel>
                                    <!-- Image Source="Images/home.png" Width="16" /-->
                                    <TextBlock HorizontalAlignment="Center">Jog +</TextBlock>
                                </StackPanel>
                            </Button.Content>
                        </Button>
                    </Grid>
                </GroupBox>
                <!-- X -->
                <DockPanel Grid.Column="1">
                    <!-- X motion -->
                    <GroupBox Header="X Axis" DockPanel.Dock="Top">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <Button Grid.Column="0" Margin="3" ToolTip="Home X axis" Command="{Binding HomeAxisCommand}" CommandParameter="X" Width="48" Height="48">
                                <Button.Content>
                                    <StackPanel>
                                        <Image Source="Images/home.png" Width="16" />
                                        <TextBlock HorizontalAlignment="Center">Home X</TextBlock>
                                    </StackPanel>
                                </Button.Content>
                            </Button>
                            <Button Grid.Column="1" Margin="3" ToolTip="Jog in the positive direction" Command="{Binding JogPositiveCommand}" CommandParameter="X" Width="48" Height="48">
                                <Button.Content>
                                    <StackPanel>
                                        <TextBlock HorizontalAlignment="Center">Jog +</TextBlock>
                                    </StackPanel>
                                </Button.Content>
                            </Button>
                            <ComboBox Grid.Column="2" Height="30" MaxWidth="75" ItemsSource="{Binding XAxisIncrementItems}" IsSynchronizedWithCurrentItem="True" />
                            <Button Grid.Column="3" Margin="3" ToolTip="Jog in the negative direction" Command="{Binding JogNegativeCommand}" CommandParameter="X" Width="48" Height="48">
                                <Button.Content>
                                    <StackPanel>
                                        <TextBlock HorizontalAlignment="Center">Jog -</TextBlock>
                                    </StackPanel>
                                </Button.Content>
                            </Button>
                        </Grid>
                    </GroupBox>
                    <!-- position readout -->
                    
                    <GroupBox Header="Current Axis Positions">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Row="0" Orientation="Horizontal" Grid.ColumnSpan="2" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock FontSize="20">X:</TextBlock>
                                <TextBox Width="125" IsReadOnly="True" HorizontalAlignment="Center"
                                         Text="{Binding CurrentX, Converter={StaticResource PositionFormatter}, ConverterParameter='\{0:0.000\}'}"
                                         FontSize="20" Background="Black" Foreground="DarkGreen" FontWeight="Bold" MinWidth="75" />
                                <CheckBox IsChecked="{Binding XEnabled}" Command="{Binding EnableXCommand}" VerticalAlignment="Center" Margin="15,0,0,0">Enable axis</CheckBox>
                            </StackPanel>
                            <StackPanel Grid.Row="1" Orientation="Horizontal" Grid.ColumnSpan="2" HorizontalAlignment="Center">
                                <TextBlock FontSize="20">Y:</TextBlock>
                                <TextBox Width="125" IsReadOnly="True" HorizontalAlignment="Center"
                                         Text="{Binding CurrentY, Converter={StaticResource PositionFormatter}, ConverterParameter='\{0:0.000\}'}"
                                         FontSize="20" Background="Black" Foreground="DarkGreen" FontWeight="Bold" MinWidth="75" />
                                <CheckBox IsChecked="{Binding YEnabled}" Command="{Binding EnableYCommand}" VerticalAlignment="Center" Margin="15,0,0,0">Enable axis</CheckBox>
                            </StackPanel>
                            <StackPanel Grid.Row="2" Orientation="Horizontal" Grid.ColumnSpan="2" HorizontalAlignment="Center">
                                <TextBlock FontSize="20">Z:</TextBlock>
                                <TextBox Width="125" IsReadOnly="True" HorizontalAlignment="Center"
                                         Text="{Binding CurrentZ, Converter={StaticResource PositionFormatter}, ConverterParameter='\{0:0.000\}'}"
                                         FontSize="20" Background="Black" Foreground="DarkGreen" FontWeight="Bold" MinWidth="75" />
                                <CheckBox IsChecked="{Binding ZEnabled}" Command="{Binding EnableZCommand}" VerticalAlignment="Center" Margin="15,0,0,0">Enable axis</CheckBox>
                            </StackPanel>
                        </Grid>
                    </GroupBox>
                </DockPanel>
                <!-- Z -->
                <GroupBox Header="Z Axis" Grid.Row="0" Grid.Column="2">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <Button Grid.Row="0" Margin="3" ToolTip="Home Z axis" Command="{Binding HomeAxisCommand}" CommandParameter="Z" Width="48" Height="48">
                            <Button.Content>
                                <StackPanel>
                                    <Image Source="Images/home.png" Width="16" />
                                    <TextBlock HorizontalAlignment="Center">Home Z</TextBlock>
                                </StackPanel>
                            </Button.Content>
                        </Button>
                        <Button Grid.Row="1" Margin="3" ToolTip="Jog in the negative direction" Command="{Binding JogNegativeCommand}" CommandParameter="Z" Width="48" Height="48">
                            <Button.Content>
                                <StackPanel>
                                    <!-- Image Source="Images/home.png" Width="16" /-->
                                    <TextBlock HorizontalAlignment="Center">Jog -</TextBlock>
                                </StackPanel>
                            </Button.Content>
                        </Button>
                        <ComboBox Grid.Row="2" Height="30" MaxWidth="75" ItemsSource="{Binding ZAxisIncrementItems}" IsSynchronizedWithCurrentItem="True" />
                        <Button Grid.Row="3" Margin="3" ToolTip="Jog in the positive direction" Command="{Binding JogPositiveCommand}" CommandParameter="Z" Width="48" Height="48">
                            <Button.Content>
                                <StackPanel>
                                    <!-- Image Source="Images/home.png" Width="16" /-->
                                    <TextBlock HorizontalAlignment="Center">Jog +</TextBlock>
                                </StackPanel>
                            </Button.Content>
                        </Button>
                    </Grid>
                </GroupBox>
                <!-- End Jogging -->
            </Grid>
            
            <!-- Teaching Here -->
            <GroupBox Header="Teaching" Grid.Column="1" Grid.RowSpan="3">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="30"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <!-- select labware -->
                    <TextBlock Grid.Row="0" Grid.Column="0">Select labware:</TextBlock>
                    <ComboBox Grid.Row="0" Grid.Column="1" ItemsSource="{Binding AvailableLabware}"></ComboBox>
                    <!-- select teachpoint -->
                    <TextBlock Grid.Row="1" Grid.Column="0">Select teachpoint:</TextBlock>
                    <ComboBox Grid.Row="1" Grid.Column="1" ItemsSource="{Binding Teachpoints}"></ComboBox>
                    <!-- teachpoint functions -->
                    <Button Grid.Row="2" Grid.ColumnSpan="2" Command="{Binding MoveToTeachpointCommand}">Move to Teachpoint</Button>
                    <Button Grid.Row="3" Grid.ColumnSpan="2" Command="{Binding UpdateTeachpointCommand}">Update Teachpoint</Button>
                </Grid>
            </GroupBox>
            <!-- End Teaching-->
        </Grid>
    </DockPanel>
</UserControl>
