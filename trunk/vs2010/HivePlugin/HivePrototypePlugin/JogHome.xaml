<UserControl x:Class="BioNex.HivePrototypePlugin.JogHome"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:utils="clr-namespace:BioNex.Shared.Utils;assembly=Utils"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    Height="Auto" Width="Auto">

    <UserControl.Resources>
        <utils:StringFormatter x:Key="PositionFormatConverter" />
        <Style TargetType="{x:Type Button}">
            <Setter Property="ToolTipService.ShowOnDisabled" Value="True" />
        </Style>
        <ObjectDataProvider x:Key="JogIncrements">            
            <ObjectDataProvider.ObjectInstance>
                <x:Array Type="sys:Double">
                    <sys:Double>0.01</sys:Double>
                    <sys:Double>0.02</sys:Double>
                    <sys:Double>0.05</sys:Double>
                    <sys:Double>0.1</sys:Double>
                    <sys:Double>0.2</sys:Double>
                    <sys:Double>0.5</sys:Double>
                    <sys:Double>1</sys:Double>
                    <sys:Double>2</sys:Double>
                    <sys:Double>5</sys:Double>
                    <sys:Double>10</sys:Double>
                    <sys:Double>20</sys:Double>
                    <sys:Double>50</sys:Double>
                    <sys:Double>100</sys:Double>
                    <sys:Double>200</sys:Double>
                    <sys:Double>500</sys:Double>
                </x:Array>
            </ObjectDataProvider.ObjectInstance>                
        </ObjectDataProvider>
        <Style x:Key="PositionStyle" TargetType="{x:Type TextBox}">
            <Setter Property="TextAlignment" Value="Right" />
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Background" Value="Black" />
            <Setter Property="Foreground" Value="Green" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="IsReadOnly" Value="True" />
            <Setter Property="Margin" Value="3" />
            <Setter Property="Height" Value="25" />
        </Style>
        <Style x:Key="JogIncrementStyle" TargetType="ComboBox">
            <Setter Property="Height" Value="25" />
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"></ColumnDefinition>
            <ColumnDefinition MaxWidth="100"></ColumnDefinition>
            <ColumnDefinition Width="100"></ColumnDefinition>
            <ColumnDefinition Width="110"></ColumnDefinition>
            <ColumnDefinition Width="70"></ColumnDefinition>
            <ColumnDefinition Width="90"></ColumnDefinition>
            <ColumnDefinition></ColumnDefinition>
            <ColumnDefinition MaxWidth="100"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" MinHeight="29"></RowDefinition>
            <RowDefinition />
            <RowDefinition />
            <RowDefinition />
            <!-- theta override row -->
            <RowDefinition Height="Auto" MinHeight="16"></RowDefinition>
            <RowDefinition />
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>
        <!-- header -->
        <Label Grid.Row="0" Grid.Column="0" HorizontalContentAlignment="Center" Background="LightGray" Margin="0,0,0,3">Axis</Label>
        <Label Grid.Row="0" Grid.Column="1" HorizontalContentAlignment="Center" Background="LightGray" Margin="0,0,0,3">Home</Label>
        <Label Grid.Row="0" Grid.Column="2" HorizontalContentAlignment="Center" Background="LightGray" Margin="0,0,0,3">Position</Label>
        <Label Grid.Row="0" Grid.Column="3" Grid.ColumnSpan="3" HorizontalContentAlignment="Center" Background="LightGray" Margin="0,0,0,3">Jogging</Label>
        <Label Grid.Row="0" Grid.Column="6" HorizontalContentAlignment="Center" Background="LightGray" Margin="0,0,0,3">Functions</Label>
        <Label Grid.Row="0" Grid.Column="7" HorizontalContentAlignment="Center" Background="LightGray" Margin="0,0,0,3">Move Home</Label>
        <!-- X -->
        <Label Grid.Row="1" Grid.Column="0" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">X</Label>
        <Button Grid.Row="1" Grid.Column="1" Margin="8" ToolTip="Home X axis" Command="{Binding HomeXCommand}">
            <Button.Content>
                <StackPanel>
                    <Image Source="Images/home.png" Width="32" />
                    <TextBlock HorizontalAlignment="Center">Home</TextBlock>
                </StackPanel>
            </Button.Content>
        </Button>
        <TextBox Grid.Row="1" Grid.Column="2" HorizontalContentAlignment="Center" Style="{StaticResource PositionStyle}" Text="{Binding CurrentWorldPosition.X, Converter={StaticResource PositionFormatConverter}, ConverterParameter='\{0:0.000\}'}"></TextBox>
        <Button Grid.Row="1" Grid.Column="3" Margin="8" Command="{Binding JogXNegativeCommand}" ToolTip="{Binding JogXToolTip}">Jog Negative</Button>
        <ComboBox Grid.Row="1" Grid.Column="4" Style="{StaticResource JogIncrementStyle}" ItemsSource="{Binding Source={StaticResource JogIncrements}}" Text="{Binding XIncrement, Mode=TwoWay}" Margin="3" IsEditable="True" />
        <Button Grid.Row="1" Grid.Column="5" Margin="8" Command="{Binding JogXPositiveCommand}" ToolTip="{Binding JogXToolTip}">Jog Positive</Button>
        <!-- Z -->
        <Label Grid.Row="2" Grid.Column="0" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">Z</Label>
        <Button Grid.Row="2" Grid.Column="1" Margin="8" ToolTip="Home Z axis" Command="{Binding HomeZCommand}">
            <Button.Content>
                <StackPanel>
                    <Image Source="Images/home.png" Width="32" />
                    <TextBlock HorizontalAlignment="Center">Home</TextBlock>
                </StackPanel>
            </Button.Content>
        </Button>
        <TextBox Grid.Row="2" Grid.Column="2" HorizontalContentAlignment="Center" Style="{StaticResource PositionStyle}" Text="{Binding CurrentWorldPosition.Z, Converter={StaticResource PositionFormatConverter}, ConverterParameter='\{0:0.000\}'}"></TextBox>
        <Button Grid.Row="2" Grid.Column="3" Margin="8" Command="{Binding JogZDownCommand}" ToolTip="{Binding JogZToolTip}">Jog Down</Button>
        <ComboBox Grid.Row="2" Grid.Column="4" Style="{StaticResource JogIncrementStyle}" ItemsSource="{Binding Source={StaticResource JogIncrements}}" Text="{Binding ZIncrement, Mode=TwoWay}" Margin="3" IsEditable="True" />
        <Button Grid.Row="2" Grid.Column="5" Margin="8" Command="{Binding JogZUpCommand}" ToolTip="{Binding JogZToolTip}">Jog Up</Button>
        <!-- Theta -->
        <Label Grid.Row="3" Grid.Column="0" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">Theta</Label>
        <Button Grid.Row="3" Grid.Column="1" Margin="8" ToolTip="Home theta axis" Command="{Binding HomeThetaCommand}">
            <Button.Content>
                <StackPanel>
                    <Image Source="Images/home.png" Width="32" />
                    <TextBlock HorizontalAlignment="Center">Home</TextBlock>
                </StackPanel>
            </Button.Content>
        </Button>
        <TextBox Grid.Row="3" Grid.Column="2" HorizontalContentAlignment="Center" Style="{StaticResource PositionStyle}" Text="{Binding CurrentWorldPosition.T, Converter={StaticResource PositionFormatConverter}, ConverterParameter='\{0:0.000\}'}"></TextBox>
        <Button Grid.Row="3" Grid.Column="3" Margin="8" Command="{Binding JogThetaAwayFromPlateCommand}" ToolTip="{Binding JogThetaToolTip}">Away From Plate</Button>
        <ComboBox Grid.Row="3" Grid.Column="4" Margin="3" Style="{StaticResource JogIncrementStyle}" ItemsSource="{Binding Source={StaticResource JogIncrements}}" Text="{Binding ThetaIncrement}" IsEditable="True" />
        <Button Grid.Row="3" Grid.Column="5" Margin="8" Command="{Binding JogThetaTowardsPlateCommand}" ToolTip="{Binding JogThetaToolTip}">Toward Plate</Button>
        <Button Grid.Row="3" Grid.Column="6" Margin="8" Command="{Binding ZUp10RetractCommand}">Z up 10mm, Retract</Button>
        <!-- Theta move override -->
        <CheckBox Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="6" IsChecked="{Binding OverrideThetaCheck, Mode=TwoWay}" Margin="8,0,0,0">
            Override Theta position checking before allowing X and Z axes to move.  Be careful!
        </CheckBox>
        <!-- Gripper -->
        <Label Grid.Row="5" Grid.Column="0" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">Gripper</Label>
        <Button Grid.Row="5" Grid.Column="1" Margin="8" ToolTip="Home gripper" Command="{Binding HomeGripperCommand}">
            <Button.Content>
                <StackPanel>
                    <Image Source="Images/home.png" Width="32" />
                    <TextBlock HorizontalAlignment="Center">Home</TextBlock>
                </StackPanel>
            </Button.Content>
        </Button>
        <TextBox Grid.Row="5" Grid.Column="2" HorizontalContentAlignment="Center" Style="{StaticResource PositionStyle}" Text="{Binding CurrentWorldPosition.G, Converter={StaticResource PositionFormatConverter}, ConverterParameter='\{0:0.000\}'}"></TextBox>
        <Button Grid.Row="5" Grid.Column="3" Margin="8" Command="{Binding JogGripperCloseCommand}" ToolTip="{Binding JogGripperToolTip}">Close</Button>
        <ComboBox Grid.Row="5" Grid.Column="4" Margin="3" Style="{StaticResource JogIncrementStyle}" ItemsSource="{Binding Source={StaticResource JogIncrements}}" Text="{Binding GripperIncrement}" IsEditable="True" />
        <Button Grid.Row="5" Grid.Column="5" Margin="8" Command="{Binding JogGripperOpenCommand}" ToolTip="{Binding JogGripperToolTip}">Open</Button>
        <UniformGrid Rows="1" Grid.Row="5" Grid.Column="6">
            <Button Margin="8" Command="{Binding GripPlateCommand}" ToolTip="{Binding GripPlateToolTip}">Grip Plate</Button>
            <Button Margin="8" Command="{Binding UngripPlateCommand}" ToolTip="{Binding UngripPlateToolTip}">Ungrip Plate</Button>
        </UniformGrid>
        <!-- Y -->
        <Label Grid.Row="6" Grid.Column="0" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">Y (derived)</Label>
        <TextBox Grid.Row="6" Grid.Column="2" HorizontalContentAlignment="Center" Style="{StaticResource PositionStyle}" Text="{Binding CurrentToolPosition.Y, Converter={StaticResource PositionFormatConverter}, ConverterParameter='\{0:0.000\}'}"></TextBox>
        <Button Grid.Row="6" Grid.Column="3" Margin="8" Command="{Binding JogYInCommand}"  ToolTip="{Binding JogYToolTip}">Jog In</Button>
        <ComboBox Grid.Row="6" Grid.Column="4" Margin="3" IsEditable="True" Style="{StaticResource JogIncrementStyle}" ItemsSource="{Binding Source={StaticResource JogIncrements}}" Text="{Binding YIncrement, Mode=TwoWay}"></ComboBox>
        <Button Grid.Row="6" Grid.Column="5" Margin="8" Command="{Binding JogYOutCommand}" ToolTip="{Binding JogYToolTip}">Jog Out</Button>
        <!-- Go Home Functions -->
        <Button Grid.Row="1" Grid.Column="7" Margin="8" ToolTip="Move X axis home" Command="{Binding GoHomeXCommand}">
            <Button.Content>
                <StackPanel>
                    <Image Source="Images/gohome.png" Width="32" />
                    <TextBlock HorizontalAlignment="Center">Move Home</TextBlock>
                </StackPanel>
            </Button.Content>
        </Button>
        <Button Grid.Row="2" Grid.Column="7" Margin="8" ToolTip="Move Z axis home" Command="{Binding GoHomeZCommand}">
            <Button.Content>
                <StackPanel>
                    <Image Source="Images/gohome.png" Width="32" />
                    <TextBlock HorizontalAlignment="Center">Move Home</TextBlock>
                </StackPanel>
            </Button.Content>
        </Button>
        <Button Grid.Row="3" Grid.Column="7" Margin="8" ToolTip="Move Theta axis home -- WARNING: DOES NOT CAM" Command="{Binding GoHomeTCommand}">
            <Button.Content>
                <StackPanel>
                    <Image Source="Images/gohome.png" Width="32" />
                    <TextBlock HorizontalAlignment="Center">Move Home</TextBlock>
                </StackPanel>
            </Button.Content>
        </Button>
        <Button Grid.Row="5" Grid.Column="7" Margin="8" ToolTip="Move gripper home" Command="{Binding GoHomeGCommand}">
            <Button.Content>
                <StackPanel>
                    <Image Source="Images/gohome.png" Width="32" />
                    <TextBlock HorizontalAlignment="Center">Move Home</TextBlock>
                </StackPanel>
            </Button.Content>
        </Button>
        <!-- other functions -->
        <UniformGrid Grid.Row="7" Grid.ColumnSpan="7" Rows="1" Margin="3">
            <Button Margin="3" Command="{Binding HomeAllAxesCommand}" ToolTip="{Binding HomeAllAxesToolTip}">Home All Axes</Button>
            <Button Margin="3" Command="{Binding ParkRobotCommand}"  ToolTip="{Binding ParkRobotToolTip}">Park Robot</Button>
        </UniformGrid>        
    </Grid>
</UserControl>
