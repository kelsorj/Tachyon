<UserControl x:Class="BioNex.HivePrototypePlugin.PlateLocationConfiguration"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:updown="clr-namespace:BioNex.Shared.WPFControls;assembly=UpDownControl"
    xmlns:local="clr-namespace:BioNex.HivePrototypePlugin"
    xmlns:utils="clr-namespace:BioNex.Shared.Utils;assembly=Utils"
    Height="Auto" Width="Auto">
    
    <UserControl.Resources>
        <utils:StringPlus0Formatter x:Key="IndexFormatConverter" />
        <Style x:Key="{x:Type Button}" TargetType="{x:Type Button}">
            <Setter Property="Margin" Value="3" />
        </Style>
    </UserControl.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
        </Grid.RowDefinitions>
        <TextBlock Grid.Row="0">Current Rack Configuration:</TextBlock>
        <ListBox Grid.Row="1" AlternationCount="100" ItemsSource="{Binding Racks}" SelectedIndex="{Binding SelectedRackIndex}">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid Rows="1" />
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical">
                        <TextBlock Text="{Binding Path=Number, Converter={StaticResource IndexFormatConverter}, ConverterParameter='Rack \{0\}'}"></TextBlock>
                        <updown:UpDown Number="{Binding SlotCount, Mode=TwoWay}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <Button Grid.Row="2" Command="{Binding InsertRackBeforeCommand}">Insert Rack Before</Button>
        <Button Grid.Row="3" Command="{Binding InsertRackAfterCommand}">Insert Rack After</Button>
        <Button Grid.Row="4" Command="{Binding DeleteSelectedRackCommand}">Delete Selected Rack(s)</Button>
    </Grid>
</UserControl>
