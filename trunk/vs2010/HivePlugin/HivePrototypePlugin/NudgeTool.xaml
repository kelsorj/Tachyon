<UserControl x:Class="BioNex.HivePrototypePlugin.NudgeTool"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300" Height="200">
    
    <UserControl.Resources>
        <ObjectDataProvider x:Key="NudgeIncrements">
            <ObjectDataProvider.ObjectInstance>
                <x:Array Type="sys:Double">
                    <sys:Double>0.01</sys:Double>
                    <sys:Double>0.02</sys:Double>
                    <sys:Double>0.05</sys:Double>
                    <sys:Double>0.1</sys:Double>
                    <sys:Double>0.2</sys:Double>
                    <sys:Double>0.5</sys:Double>
                    <sys:Double>1.0</sys:Double>
                </x:Array>
            </ObjectDataProvider.ObjectInstance>
        </ObjectDataProvider>
        
        <!-- retemplating for listbox -->
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="Background" Value="Transparent"/>
            <!--Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/-->
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="Padding" Value="2,0,0,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBoxItem}">
                        <Border x:Name="Bd" SnapsToDevicePixels="true" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}" CornerRadius="15">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="true">
                                <!--Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/-->
                                <!--Setter Property="Background" Value="Red" /-->

                                <!--Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/-->
                                <Setter Property="BorderThickness" Value="4" />
                                <Setter Property="BorderBrush" Value="Orange" />
                                <Setter Property="Height" Value="30" />
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsSelected" Value="true"/>
                                    <Condition Property="Selector.IsSelectionActive" Value="false"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                            </MultiTrigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <SolidColorBrush x:Key="ListBorder" Color="#828790"/>
        <Style x:Key="HorizontalListBox" TargetType="{x:Type ListBox}">
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
            <Setter Property="BorderBrush" Value="{StaticResource ListBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <UniformGrid Rows="1"/>
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBox}">
                        <Border x:Name="Bd" SnapsToDevicePixels="true" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Padding="1">
                            <ScrollViewer Padding="{TemplateBinding Padding}" Focusable="false">
                                <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </ScrollViewer>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                            </Trigger>
                            <Trigger Property="IsGrouping" Value="true">
                                <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </UserControl.Resources>
    
    <Grid>
        <GroupBox Header="NudgeTool for Teachpoint B" BorderBrush="Orange">
            <DockPanel>
                <!-- nudge increments -->
                <StackPanel Orientation="Vertical" DockPanel.Dock="Top">
                    <TextBlock>Nudge amount:</TextBlock>
                    <ListBox ItemsSource="{Binding Source={StaticResource NudgeIncrements}}" SelectedItem="{Binding SelectedNudgeIncrement, Mode=TwoWay}" Style="{DynamicResource HorizontalListBox}" />
                </StackPanel>
                <!-- button area -->
                <Grid DockPanel.Dock="Bottom">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <!-- Z up -->
                    <Button Grid.Row="0" Grid.Column="1" ToolTip="Nudge up" Command="{Binding NudgeCommand}" CommandParameter="z_up">Z up</Button>
                    <!-- Z down -->
                    <Button Grid.Row="2" Grid.Column="1" ToolTip="Nudge down" Command="{Binding NudgeCommand}" CommandParameter="z_down">Z down</Button>
                    <!-- X left -->
                    <Button Grid.Row="1" Grid.Column="0" ToolTip="Nudge left" Command="{Binding NudgeCommand}" CommandParameter="x_left">X left</Button>
                    <!-- X right -->
                    <Button Grid.Row="1" Grid.Column="2" ToolTip="Nudge right" Command="{Binding NudgeCommand}" CommandParameter="x_right">X right</Button>
                    <!-- Y in (towards plate) -->
                    <Button Grid.Row="0" Grid.Column="4" Grid.ColumnSpan="3" ToolTip="Nudge towards plate" Command="{Binding NudgeCommand}" CommandParameter="y_towards">Y towards plate</Button>
                    <!-- Y out (away from plate) -->
                    <Button Grid.Row="2" Grid.Column="4" Grid.ColumnSpan="3" ToolTip="Nudge away from plate" Command="{Binding NudgeCommand}" CommandParameter="y_away">Y away from plate</Button>
                </Grid>
            </DockPanel>
        </GroupBox>
    </Grid>
</UserControl>
