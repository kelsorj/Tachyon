<UserControl x:Class="BioNex.Shared.Microscan.DynamicImaging"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:utils="clr-namespace:BioNex.Shared.Utils;assembly=Utils"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    
    <UserControl.Resources>
        <!-- ResourceDictionary Source="pack://application:,,,/Utils;component/BioNexStyles.xaml" /-->
        <utils:ImageConverter x:Key="ImageConverter" />
    </UserControl.Resources>
    
    <DockPanel DockPanel.Dock="Top">
        <StackPanel DockPanel.Dock="Bottom">
            <Button Command="{Binding RefreshImagesCommand}">Refresh</Button>
            <Button Command="{Binding DeleteAllImagesCommand}">Delete All Images</Button>
            <Button Command="{Binding DownloadSelectedImageCommand}">Download Selected Image</Button>
        </StackPanel>

        <ListBox DockPanel.Dock="Top" ItemsSource="{Binding ReaderImages}" ScrollViewer.CanContentScroll="True">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Image Source="{Binding Source, Converter={StaticResource ImageConverter}}" />
                        <TextBlock Text="{Binding Filename}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </DockPanel>
</UserControl>
