<UserControl x:Class="BioNex.Shared.SimpleInventory.InventoryView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Height="Auto" Width="Auto">
    
    <UserControl.Resources>
        <DataTemplate x:Key="InventoryTemplate">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="120"></ColumnDefinition>
                    <ColumnDefinition Width="150"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <TextBox Grid.Column="0" Text="{Binding Barcode}" Margin="3"></TextBox>
                <!-- just binding to DataContext ends up using InventoryItem as parent, so we need to get to the UserControl -->
                <ComboBox Grid.Column="1" SelectedItem="{Binding Teachpoint, Mode=TwoWay}" ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.TeachpointNames}" Margin="3"></ComboBox>
            </Grid>
        </DataTemplate>
    </UserControl.Resources>
    
    <DockPanel>
        <Button DockPanel.Dock="Bottom" Margin="3" Command="{Binding ReloadInventoryCommand}">Reload Inventory</Button>
        <Button DockPanel.Dock="Bottom" Margin="3" Command="{Binding ApplyInventoryChangesCommand}">Apply</Button>
        <Button DockPanel.Dock="Bottom" Margin="3" Command="{Binding DeletePlateCommand}">Delete Plate</Button>
        <Button DockPanel.Dock="Bottom" Margin="3" Command="{Binding AddNewPlateCommand}">Add Plate</Button>
        <ListBox DockPanel.Dock="Top" SelectedItem="{Binding SelectedPlate}" ItemsSource="{Binding Inventory, Mode=TwoWay}" ItemTemplate="{StaticResource InventoryTemplate}" />
    </DockPanel>
</UserControl>